/*
 * File: game.html
 *
 * Creates the main game and page.
 *
 * Author:  Eesa Sharma <eesa@eesasharma.com>
 * Licence: GNU v3.0 (https://en.wikipedia.org/wiki/GNU_General_Public_License)
*/

<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="icon" href="images/favicon.png">
  <title>Kombucha Clicker</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      text-align: center;
      background-color: #f0f0f0;
      margin: 20px;
      background: url('images/background.jpg');
    }

    #container {
      width: 400px;
      margin: auto;
      padding: 20px;
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    #kombucha {
      width: 100%;
      height: auto;
    }

    #button {
      padding: 10px;
      font-size: 16px;
      margin-top: 20px;
      cursor: pointer;
      background-color: #FFA500;
      color: #fff;
      border: none;
      border-radius: 5px;
    }

#saveButton {
      padding: 10px;
      font-size: 16px;
      margin-top: 20px;
      cursor: pointer;
      background-color: #4CAF50;
      color: #fff;
      border: none;
      border-radius: 5px;
    }

#deleteButton {
      padding: 10px;
      font-size: 16px;
      margin-top: 20px;
      cursor: pointer;
      background-color: #FF0000;
      color: #fff;
      border: none;
      border-radius: 5px;
    }

#muteButton {
      padding: 10px;
      font-size: 16px;
      margin-top: 20px;
      cursor: pointer;
      background-color: #D3D3D3;
      color: #fff;
      border: none;
      border-radius: 5px;
    }

    #score {
      font-size: 24px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div id="container">
    <h1>Kombucha Clicker</h1>
    <img id="kombucha" src="images/kombucha.jpg" alt="Kombucha" />
    <button id="saveButton">Save Score</button>
    <button id="button">Brew Kombucha</button>
    <button id="deleteButton">Delete Score</button>
    <button id="muteButton" onclick="pauseAudio()">Mute</button>
    <p id="score">Kombucha Bottles: 0</p>
  </div>

  <script>
    // Game variables
    let score = 0;

    // DOM elements
    const button = document.getElementById('button');
    const scoreDisplay = document.getElementById('score');
    const saveButton = document.getElementById('saveButton');

    // Event listener for the button click
    button.addEventListener('click', () => {
      score++;
      updateScore();
    });

    // Event listener for the save button
    saveButton.addEventListener('click', () => {
      // Save the score to local storage
      localStorage.setItem('kombuchaScore', score);
    alert("Saved! 😋");
    });

    // Event listener for the delete button
    deleteButton.addEventListener('click', () => {
    // Display a confirmation dialog
    const isConfirmed = window.confirm('Are you sure you want to delete the score?');

    // If the user confirms, proceed with deleting the score
    if (isConfirmed) {
    // Reset the score and remove from local storage
    score = 0;
    localStorage.removeItem('kombuchaScore');
    alert("Deleted! 🗑️");
    // Refresh the page
    location.reload();
}
});

    // Function to update the score display
    function updateScore() {
      scoreDisplay.textContent = `Kombucha Bottles: ${score}`;

      // Check if the player has reached a milestone
      if (score % 11 === 0) {
        alert('Congrats! You brewed another batch of Kombucha! 🍹');
      }
    }

    // Load from local storage on page load
    window.addEventListener('load', () => {
      const savedScore = localStorage.getItem('kombuchaScore');

      // While saved score is not equal to nothing
      if (savedScore !== null) {
        score = parseInt(savedScore, 10); //Uses a number 10 to parse a base-10 number
        updateScore();
      }
    });
  </script>
</body>
</html>